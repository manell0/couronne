{% extends "base.html" %}
{% load static %}
{% block page_header %}
<!-- information drop down button, shows until the registered user
has registered three matches -->
<div class="container header-container">
    <div class="row">
        <div class="col">
            <p>
                <a class="btn btn-outline-dark btn-sm" data-toggle="collapse" href="#collapseExample" role="button"
                    aria-expanded="false" aria-controls="collapseExample">
                Information About Venue/Club:
                </a>
            </p>
            <div class="collapse" id="collapseExample">
                <div class="card card-body">
                    <p> Here you have the opportunity to see results from only your own Club <span
                        class="text-success"><strong>{{ club }}</strong> </span>.
                        Everyone who has registered with the same Venue/Club as you are is shown here.
                        <strong class="text-danger">Keep in mind that the Venue/Club name you enter is case-sensitive.</strong>
                    </p>
                    <p>
                        <strong>Update your profile with a venue/club </strong><a href="{% url 'home:profile' %}">here...</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <div class="jumbotron bg-light">
                <div class="alert alert-light">
                    <div class="alert alert-success">
                        <!-- Logic to list only members hwo is in same club as you -->
                        {% if user.is_superuser %}  
                            <h4 class="border-big bg-light text-dark shadow rounded">Venue/Club:</h4> <h5><span class="text-danger"> {{ user }}{{ club }} </span></h5>
                        {% elif club %}
                        <h4 class="border-big bg-light text-dark shadow rounded">Venue/Club: <span class="text-success h5"> {{ club }} </span></h4>
                        {% else %}
                        <span class="text-danger"><strong> Does not belong to any Club</strong></span>
                        <span class="text-dark">Join or start a new Venue/Club <a href="{% url 'home:profile' %}"></span>
                        here...</a>
                        {% endif %}
                    </div>
                    {% if all_objects %}
                    <table class="table table-striped text-right font-size-small">
                        <th class="text-left">Player</th>
                        <th class="hides">Played</th>
                        <th class="hides">Won</th>
                        <th>Average</th>
                        <th>Rating</th>
                        {% for person in all_objects %}
                        {% if person.club_location == club %}
                        <tr>
                            <td class="text-left">{{ forloop.counter }}. {{ person.user }}</td>
                            <td class="hides">{{ person.number_played_matches }}</td>
                            <td class="hides text-success"><strong>{{ person.matches_won}}</strong></td>
                            <td>{{ person.average|floatformat:3 }}</td>
                            <td><strong>{{person.ratingf|floatformat:3}}</strong></td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </table>
                    {% endif %}
                </div>
                <div class="text-center">
                    <!-- Back and home buttons -->
                    <a class="btn btn-outline-dark btn-sm border-danger" href="javascript:history.back()"> ← BACK </a>
                    <a class="btn btn-outline-dark btn-sm border-info" href="{% url 'home:home' %}"> ← HOME </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
